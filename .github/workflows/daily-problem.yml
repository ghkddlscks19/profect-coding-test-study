# .github/workflows/daily-problem.yml
name: Daily Programmers Problem to Discord

on:
  schedule:
    # ë§¤ì¼ ì˜¤ì „ 9ì‹œ (UTC ê¸°ì¤€ 0ì‹œ = í•œêµ­ì‹œê°„ 9ì‹œ)
    - cron: '0 0 * * *'
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ë„ ê°€ëŠ¥

jobs:
  send-daily-problem:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      
    - name: Calculate today's problem index
      id: calculate
      run: |
        # ìŠ¤í„°ë”” ì‹œì‘ ë‚ ì§œ ì„¤ì • (ì›í•˜ëŠ” ë‚ ì§œë¡œ ë³€ê²½í•˜ì„¸ìš”)
        START_DATE="2025-09-23"
        TODAY=$(date +%Y-%m-%d)
        
        # ë‚ ì§œ ì°¨ì´ ê³„ì‚° (ë©°ì¹ ì§¸ì¸ì§€)
        DAYS_DIFF=$(( ( $(date -d "$TODAY" +%s) - $(date -d "$START_DATE" +%s) ) / 86400 ))
        DAY_NUMBER=$(( $DAYS_DIFF + 1 ))
        
        echo "Current day number: $DAY_NUMBER"
        
        # 79ì¼ì„ ì´ˆê³¼í–ˆëŠ”ì§€ í™•ì¸
        if [ $DAY_NUMBER -gt 79 ]; then
          echo "ğŸ‰ 79ê°œ ë¬¸ì œë¥¼ ëª¨ë‘ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!"
          echo "completed=true" >> $GITHUB_OUTPUT
          echo "day_number=$DAY_NUMBER" >> $GITHUB_OUTPUT
          echo "current_date=$TODAY" >> $GITHUB_OUTPUT
        elif [ $DAY_NUMBER -lt 1 ]; then
          echo "âŒ ì•„ì§ ì‹œì‘ ë‚ ì§œê°€ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
          echo "not_started=true" >> $GITHUB_OUTPUT
          echo "day_number=$DAY_NUMBER" >> $GITHUB_OUTPUT
          echo "current_date=$TODAY" >> $GITHUB_OUTPUT
        else
          # ì •ìƒ ë²”ìœ„ (1-79ì¼)
          PROBLEM_INDEX=$(( $DAY_NUMBER - 1 ))  # 0ë¶€í„° ì‹œì‘í•˜ë¯€ë¡œ -1
          echo "problem_index=$PROBLEM_INDEX" >> $GITHUB_OUTPUT
          echo "day_number=$DAY_NUMBER" >> $GITHUB_OUTPUT
          echo "current_date=$TODAY" >> $GITHUB_OUTPUT
          echo "completed=false" >> $GITHUB_OUTPUT
          echo "not_started=false" >> $GITHUB_OUTPUT
        fi
        
    - name: Get problem details
      if: steps.calculate.outputs.completed == 'false' && steps.calculate.outputs.not_started == 'false'
      id: problem
      run: |
        # 79ê°œ ë¬¸ì œ ë°°ì—´ (ì‹¤ì œ ë¬¸ì œ ë°ì´í„°)
        declare -a problems=(
          "êµì ì— ë³„ ë§Œë“¤ê¸°|https://programmers.co.kr/learn/courses/30/lessons/87377|Level 2|3ì¥. ë°°ì—´"
          "ì‚¼ê° ë‹¬íŒ½ì´|https://programmers.co.kr/learn/courses/30/lessons/68645|Level 2|3ì¥. ë°°ì—´"
          "ê±°ë¦¬ë‘ê¸° í™•ì¸í•˜ê¸°|https://programmers.co.kr/learn/courses/30/lessons/81302|Level 2|3ì¥. ë°°ì—´"
          "í–‰ë ¬ì˜ ê³±ì…ˆ|https://programmers.co.kr/learn/courses/30/lessons/12949|Level 2|3ì¥. ë°°ì—´"
          "ìì—°ìˆ˜ ë’¤ì§‘ì–´ ë°°ì—´ë¡œ ë§Œë“¤ê¸°|https://programmers.co.kr/learn/courses/30/lessons/12932|Level 1|4ì¥. ë¬¸ìì—´"
          "ì‹œì € ì•”í˜¸|https://programmers.co.kr/learn/courses/30/lessons/12926|Level 1|4ì¥. ë¬¸ìì—´"
          "ì´ìƒí•œ ë¬¸ì ë§Œë“¤ê¸°|https://programmers.co.kr/learn/courses/30/lessons/12930|Level 1|4ì¥. ë¬¸ìì—´"
          "ë¬¸ìì—´ ì••ì¶•|https://programmers.co.kr/learn/courses/30/lessons/60057|Level 2|4ì¥. ë¬¸ìì—´"
          "3ì§„ë²• ë’¤ì§‘ê¸°|https://programmers.co.kr/learn/courses/30/lessons/68935|Level 1|4ì¥. ë¬¸ìì—´"
          "ì´ì§„ ë³€í™˜ ë°˜ë³µí•˜ê¸°|https://programmers.co.kr/learn/courses/30/lessons/70129|Level 2|4ì¥. ë¬¸ìì—´"
          "ë¬¸ìì—´ ë‚´ pì™€ yì˜ ê°œìˆ˜|https://programmers.co.kr/learn/courses/30/lessons/12916|Level 1|4ì¥. ë¬¸ìì—´"
          "ìˆ«ì ë¬¸ìì—´ê³¼ ì˜ë‹¨ì–´|https://programmers.co.kr/learn/courses/30/lessons/81301|Level 1|4ì¥. ë¬¸ìì—´"
          "ë¬¸ìì—´ ë‹¤ë£¨ê¸° ê¸°ë³¸|https://programmers.co.kr/learn/courses/30/lessons/12918|Level 1|4ì¥. ë¬¸ìì—´"
          "ì‹ ê·œ ì•„ì´ë”” ì¶”ì²œ|https://programmers.co.kr/learn/courses/30/lessons/72410|Level 1|4ì¥. ë¬¸ìì—´"
          "ì¿¼ë“œì••ì¶• í›„ ê°œìˆ˜ ì„¸ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/68936|Level 2|5ì¥. ì¬ê·€"
          "í•˜ë…¸ì´ì˜ íƒ‘|https://school.programmers.co.kr/learn/courses/30/lessons/12946|Level 3|5ì¥. ì¬ê·€"
          "ëª¨ìŒ ì‚¬ì „|https://school.programmers.co.kr/learn/courses/30/lessons/84512|Level 2|5ì¥. ì¬ê·€"
          "ëª¨ì˜ê³ ì‚¬|https://school.programmers.co.kr/learn/courses/30/lessons/42840|Level 1|6ì¥. ì™„ì „ íƒìƒ‰"
          "ì¹´í«|https://school.programmers.co.kr/learn/courses/30/lessons/42842|Level 2|6ì¥. ì™„ì „ íƒìƒ‰"
          "ìˆ˜ì‹ ìµœëŒ€í™”|https://school.programmers.co.kr/learn/courses/30/lessons/67257|Level 2|6ì¥. ì™„ì „ íƒìƒ‰"
          "ì†Œìˆ˜ ì°¾ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/42839|Level 2|6ì¥. ì™„ì „ íƒìƒ‰"
          "ë¶ˆëŸ‰ ì‚¬ìš©ì|https://school.programmers.co.kr/learn/courses/30/lessons/64064|Level 3|6ì¥. ì™„ì „ íƒìƒ‰"
          "Kë²ˆì§¸ ìˆ˜|https://school.programmers.co.kr/learn/courses/30/lessons/42748|Level 1|7ì¥. ì •ë ¬"
          "ë‘ ê°œ ë½‘ì•„ì„œ ë”í•˜ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/68644|Level 1|7ì¥. ì •ë ¬"
          "H-index|https://school.programmers.co.kr/learn/courses/30/lessons/42747|Level 2|7ì¥. ì •ë ¬"
          "ë¬¸ìì—´ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ë°°ì¹˜í•˜ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/12917|Level 1|7ì¥. ì •ë ¬"
          "ë¬¸ìì—´ ë‚´ ë§ˆìŒëŒ€ë¡œ ì •ë ¬í•˜ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/12915|Level 1|7ì¥. ì •ë ¬"
          "ê°€ì¥ í° ìˆ˜|https://school.programmers.co.kr/learn/courses/30/lessons/42746|Level 2|7ì¥. ì •ë ¬"
          "ë©”ë‰´ ë¦¬ë‰´ì–¼|https://school.programmers.co.kr/learn/courses/30/lessons/72411|Level 2|7ì¥. ì •ë ¬"
          "ìˆœìœ„ ê²€ìƒ‰|https://school.programmers.co.kr/learn/courses/30/lessons/72412|Level 2|8ì¥. ì´ì§„ íƒìƒ‰"
          "ì…êµ­ì‹¬ì‚¬|https://school.programmers.co.kr/learn/courses/30/lessons/43238|Level 3|8ì¥. ì´ì§„ íƒìƒ‰"
          "ì§•ê²€ë‹¤ë¦¬|https://school.programmers.co.kr/learn/courses/30/lessons/43236|Level 4|8ì¥. ì´ì§„ íƒìƒ‰"
          "ì „í™”ë²ˆí˜¸ ëª©ë¡|https://school.programmers.co.kr/learn/courses/30/lessons/42577|Level 2|9ì¥. í•´ì‹œ"
          "ì¤‘ë³µëœ ë¬¸ì ì œê±°|https://school.programmers.co.kr/learn/courses/30/lessons/120888|Level 0|9ì¥. í•´ì‹œ"
          "Aë¡œ B ë§Œë“¤ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/120886|Level 0|9ì¥. í•´ì‹œ"
          "ì—†ëŠ” ìˆ«ì ë”í•˜ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/86051|Level 1|9ì¥. í•´ì‹œ"
          "ì™„ì£¼í•˜ì§€ ëª»í•œ ì„ ìˆ˜|https://programmers.co.kr/learn/courses/30/lessons/42576|Level 1|9ì¥. í•´ì‹œ"
          "í”¼ë³´ë‚˜ì¹˜ ìˆ˜|https://school.programmers.co.kr/learn/courses/30/lessons/12945|Level 2|10ì¥. ë™ì  í”„ë¡œê·¸ë˜ë°"
          "ì •ìˆ˜ ì‚¼ê°í˜•|https://school.programmers.co.kr/learn/courses/30/lessons/43105|Level 3|10ì¥. ë™ì  í”„ë¡œê·¸ë˜ë°"
          "ë“±êµ£ê¸¸|https://school.programmers.co.kr/learn/courses/30/lessons/42898|Level 3|10ì¥. ë™ì  í”„ë¡œê·¸ë˜ë°"
          "ì‚¬ì¹™ì—°ì‚°|https://school.programmers.co.kr/learn/courses/30/lessons/1843|Level 4|10ì¥. ë™ì  í”„ë¡œê·¸ë˜ë°"
          "ì˜¬ë°”ë¥¸ ê´„í˜¸|https://school.programmers.co.kr/learn/courses/30/lessons/12909|Level 2|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ê´„í˜¸ íšŒì „í•˜ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/76502|Level 2|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ì£¼ì‹ ê°€ê²©|https://school.programmers.co.kr/learn/courses/30/lessons/42584|Level 2|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ê¸°ëŠ¥ ê°œë°œ|https://school.programmers.co.kr/learn/courses/30/lessons/42586|Level 2|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ë‹¤ë¦¬ë¥¼ ì§€ë‚˜ëŠ” íŠ¸ëŸ­|https://school.programmers.co.kr/learn/courses/30/lessons/42583|Level 2|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ìˆœìœ„|https://school.programmers.co.kr/learn/courses/30/lessons/49191|Level 3|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ë°©ì˜ ê°œìˆ˜|https://programmers.co.kr/learn/courses/30/lessons/49190|Level 5|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ê¸¸ ì°¾ê¸° ê²Œì„|https://school.programmers.co.kr/learn/courses/30/lessons/42892|Level 3|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ì´ì¤‘ ìš°ì„ ìˆœìœ„ í|https://programmers.co.kr/learn/courses/30/lessons/42628|Level 3|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ë””ìŠ¤í¬ ì»¨íŠ¸ë¡¤ëŸ¬|https://school.programmers.co.kr/learn/courses/30/lessons/42627|Level 3|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ë³´ì„ ì‡¼í•‘|https://school.programmers.co.kr/learn/courses/30/lessons/67258|Level 3|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ì„¬ ì—°ê²°í•˜ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/42861|Level 3|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "í˜¸í…” ë°© ë°°ì •|https://programmers.co.kr/learn/courses/30/lessons/64063|Level 4|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ê°€ì‚¬ ê²€ìƒ‰|https://school.programmers.co.kr/learn/courses/30/lessons/60060|Level 4|11ì¥. ìì£¼ ë“±ì¥í•˜ëŠ” ìë£Œ êµ¬ì¡°"
          "ìŠ¤í‚¬íŠ¸ë¦¬|https://school.programmers.co.kr/learn/courses/30/lessons/49993|Level 2|12ì¥. êµ¬í˜„"
          "í‚¤íŒ¨ë“œ ëˆ„ë¥´ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/67256|Level 1|12ì¥. êµ¬í˜„"
          "íƒ€ê²Ÿ ë„˜ë²„|https://school.programmers.co.kr/learn/courses/30/lessons/43165|Level 2|12ì¥. êµ¬í˜„"
          "ë„¤íŠ¸ì›Œí¬|https://school.programmers.co.kr/learn/courses/30/lessons/43162|Level 3|12ì¥. êµ¬í˜„"
          "ë‹¨ì–´ ë³€í™˜|https://school.programmers.co.kr/learn/courses/30/lessons/43163|Level 3|12ì¥. êµ¬í˜„"
          "ê²Œì„ ë§µ ìµœë‹¨ê±°ë¦¬|https://school.programmers.co.kr/learn/courses/30/lessons/1844|Level 3|12ì¥. êµ¬í˜„"
          "ì²´ìœ¡ë³µ|https://programmers.co.kr/learn/courses/30/lessons/42862|Level 1|12ì¥. êµ¬í˜„"
          "í° ìˆ˜ ë§Œë“¤ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/42883|Level 2|12ì¥. êµ¬í˜„"
          "ë‹¨ì†ì¹´ë©”ë¼|https://school.programmers.co.kr/learn/courses/30/lessons/42884|Level 3|12ì¥. êµ¬í˜„"
          "ì‹ ê³  ê²°ê³¼ ë°›ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/92334|Level 1|13ì¥. ë„ì „: ì¹´ì¹´ì˜¤ 2022 ë¸”ë¼ì¸ë“œ í…ŒìŠ¤íŠ¸"
          "kì§„ìˆ˜ì—ì„œ ì†Œìˆ˜ ê°œìˆ˜ êµ¬í•˜ê¸°|https://school.programmers.co.kr/learn/courses/30/lessons/92335|Level 2|13ì¥. ë„ì „: ì¹´ì¹´ì˜¤ 2022 ë¸”ë¼ì¸ë“œ í…ŒìŠ¤íŠ¸"
          "ì£¼ì°¨ ìš”ê¸ˆ ê³„ì‚°|https://school.programmers.co.kr/learn/courses/30/lessons/92341|Level 2|13ì¥. ë„ì „: ì¹´ì¹´ì˜¤ 2022 ë¸”ë¼ì¸ë“œ í…ŒìŠ¤íŠ¸"
          "ì–‘ê¶ëŒ€íšŒ|https://school.programmers.co.kr/learn/courses/30/lessons/92342|Level 2|13ì¥. ë„ì „: ì¹´ì¹´ì˜¤ 2022 ë¸”ë¼ì¸ë“œ í…ŒìŠ¤íŠ¸"
          "ì–‘ê³¼ ëŠ‘ëŒ€|https://school.programmers.co.kr/learn/courses/30/lessons/92343|Level 3|13ì¥. ë„ì „: ì¹´ì¹´ì˜¤ 2022 ë¸”ë¼ì¸ë“œ í…ŒìŠ¤íŠ¸"
          "íŒŒê´´ë˜ì§€ ì•Šì€ ê±´ë¬¼|https://school.programmers.co.kr/learn/courses/30/lessons/92344|Level 3|13ì¥. ë„ì „: ì¹´ì¹´ì˜¤ 2022 ë¸”ë¼ì¸ë“œ í…ŒìŠ¤íŠ¸"
          "ì‚¬ë¼ì§€ëŠ” ë°œíŒ|https://school.programmers.co.kr/learn/courses/30/lessons/92345|Level 3|13ì¥. ë„ì „: ì¹´ì¹´ì˜¤ 2022 ë¸”ë¼ì¸ë“œ í…ŒìŠ¤íŠ¸"
          "ì™¸í†¨ì´ ì•ŒíŒŒë²³|https://school.programmers.co.kr/learn/courses/15008/lessons/121683|Level 1|14ì¥. ì½”ë”© ì „ë¬¸ ì—­ëŸ‰ ì¸ì¦ ì‹œí—˜, PCCP ëª¨ì˜ê³ ì‚¬"
          "ì²´ìœ¡ëŒ€íšŒ|https://school.programmers.co.kr/learn/courses/15008/lessons/121684|Level 2|14ì¥. ì½”ë”© ì „ë¬¸ ì—­ëŸ‰ ì¸ì¦ ì‹œí—˜, PCCP ëª¨ì˜ê³ ì‚¬"
          "ìœ ì „ë²•ì¹™|https://school.programmers.co.kr/learn/courses/15008/lessons/121685|Level 2|14ì¥. ì½”ë”© ì „ë¬¸ ì—­ëŸ‰ ì¸ì¦ ì‹œí—˜, PCCP ëª¨ì˜ê³ ì‚¬"
          "ìš´ì˜ì²´ì œ|https://school.programmers.co.kr/learn/courses/15008/lessons/121686|Level 3|14ì¥. ì½”ë”© ì „ë¬¸ ì—­ëŸ‰ ì¸ì¦ ì‹œí—˜, PCCP ëª¨ì˜ê³ ì‚¬"
          "ì‹¤ìŠµìš© ë¡œë´‡|https://school.programmers.co.kr/learn/courses/15009/lessons/121687|Level 1|14ì¥. ì½”ë”© ì „ë¬¸ ì—­ëŸ‰ ì¸ì¦ ì‹œí—˜, PCCP ëª¨ì˜ê³ ì‚¬"
          "ì‹ ì…ì‚¬ì› êµìœ¡|https://school.programmers.co.kr/learn/courses/15009/lessons/121688|Level 2|14ì¥. ì½”ë”© ì „ë¬¸ ì—­ëŸ‰ ì¸ì¦ ì‹œí—˜, PCCP ëª¨ì˜ê³ ì‚¬"
          "ì¹´í˜ í™•ì¥|https://school.programmers.co.kr/learn/courses/15009/lessons/121689|Level 2|14ì¥. ì½”ë”© ì „ë¬¸ ì—­ëŸ‰ ì¸ì¦ ì‹œí—˜, PCCP ëª¨ì˜ê³ ì‚¬"
          "ë³´ë¬¼ ì§€ë„|https://school.programmers.co.kr/learn/courses/15009/lessons/121690|Level 3|14ì¥. ì½”ë”© ì „ë¬¸ ì—­ëŸ‰ ì¸ì¦ ì‹œí—˜, PCCP ëª¨ì˜ê³ ì‚¬"
        )
        
        # ì˜¤ëŠ˜ì˜ ë¬¸ì œ ì •ë³´ ì¶”ì¶œ
        PROBLEM_DATA="${problems[${{ steps.calculate.outputs.problem_index }}]}"
        IFS='|' read -r NAME URL LEVEL CHAPTER <<< "$PROBLEM_DATA"
        
        echo "name=$NAME" >> $GITHUB_OUTPUT
        echo "url=$URL" >> $GITHUB_OUTPUT
        echo "level=$LEVEL" >> $GITHUB_OUTPUT
        echo "chapter=$CHAPTER" >> $GITHUB_OUTPUT
        
    - name: Send daily problem to Discord
      if: steps.calculate.outputs.completed == 'false' && steps.calculate.outputs.not_started == 'false'
      env:
        DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
      run: |
        # Discord ë©”ì‹œì§€ ìƒì„±
        DISCORD_MESSAGE=$(cat << EOF
        {
          "embeds": [{
            "title": "ğŸ“š ì˜¤ëŠ˜ì˜ í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ë¬¸ì œ",
            "description": "**Day ${{ steps.calculate.outputs.day_number }}/79** - ${{ steps.problem.outputs.name }}",
            "color": 3447003,
            "fields": [
              {
                "name": "ğŸ“Š ë‚œì´ë„",
                "value": "${{ steps.problem.outputs.level }}",
                "inline": true
              },
              {
                "name": "ğŸ“– ì±•í„°",
                "value": "${{ steps.problem.outputs.chapter }}",
                "inline": true
              },
              {
                "name": "ğŸ“… ë‚ ì§œ",
                "value": "${{ steps.calculate.outputs.current_date }}",
                "inline": true
              },
              {
                "name": "ğŸ”— ë¬¸ì œ ë§í¬",
                "value": "[${{ steps.problem.outputs.name }}](${{ steps.problem.outputs.url }})",
                "inline": false
              },
              {
                "name": "ğŸ“ˆ ì§„í–‰ë¥ ",
                "value": "${{ steps.calculate.outputs.day_number }}/79 ($(( ${{ steps.calculate.outputs.day_number }} * 100 / 79 ))%)",
                "inline": false
              }
            ],
            "footer": {
              "text": "ğŸ’ª ì˜¤ëŠ˜ë„ í™”ì´íŒ…! ğŸš€"
            },
            "timestamp": "$(date -u +%Y-%m-%dT%H:%M:%S.%3NZ)"
          }]
        }
        EOF
        )
        
        # Discordë¡œ ë©”ì‹œì§€ ì „ì†¡
        curl -X POST "$DISCORD_WEBHOOK_URL" \
          -H "Content-Type: application/json" \
          -d "$DISCORD_MESSAGE"
          
    - name: Send completion message
      if: steps.calculate.outputs.completed == 'true'
      env:
        DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
      run: |
        COMPLETION_MESSAGE=$(cat << EOF
        {
          "embeds": [{
            "title": "ğŸ‰ í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ 79ë¬¸ì œ ì™„ì£¼!",
            "description": "**ì¶•í•˜í•©ë‹ˆë‹¤!** ëª¨ë“  ë¬¸ì œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ğŸ†",
            "color": 65280,
            "fields": [
              {
                "name": "ğŸ“Š ì´ ì™„ë£Œ ë¬¸ì œ",
                "value": "79ê°œ",
                "inline": true
              },
              {
                "name": "ğŸ“… ì™„ë£Œì¼",
                "value": "${{ steps.calculate.outputs.current_date }}",
                "inline": true
              },
              {
                "name": "â±ï¸ ì´ ì†Œìš” ê¸°ê°„",
                "value": "79ì¼",
                "inline": true
              },
              {
                "name": "ğŸ¯ ë‹¬ì„±ë¥ ",
                "value": "100% ì™„ì£¼! ğŸŠ",
                "inline": false
              }
            ],
            "footer": {
              "text": "ì •ë§ ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤! ì´ì œ GitHub Actionsê°€ ìë™ìœ¼ë¡œ ì¤‘ì§€ë©ë‹ˆë‹¤. ğŸ›‘"
            },
            "timestamp": "$(date -u +%Y-%m-%dT%H:%M:%S.%3NZ)"
          }]
        }
        EOF
        )
        
        curl -X POST "$DISCORD_WEBHOOK_URL" \
          -H "Content-Type: application/json" \
          -d "$COMPLETION_MESSAGE"
          
    - name: Disable workflow after completion
      if: steps.calculate.outputs.completed == 'true'
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        # ì›Œí¬í”Œë¡œìš° ë¹„í™œì„±í™”
        curl -X PUT \
          -H "Authorization: token $GITHUB_TOKEN" \
          -H "Accept: application/vnd.github.v3+json" \
          "https://api.github.com/repos/${{ github.repository }}/actions/workflows/daily-problem.yml/disable"
        
        echo "ğŸ›‘ ì›Œí¬í”Œë¡œìš°ê°€ ìë™ìœ¼ë¡œ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤."
        
    - name: Send not started message
      if: steps.calculate.outputs.not_started == 'true'
      env:
        DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
      run: |
        NOT_STARTED_MESSAGE=$(cat << EOF
        {
          "embeds": [{
            "title": "â° ì•„ì§ ì‹œì‘ ì „ì…ë‹ˆë‹¤",
            "description": "í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ 79ë¬¸ì œ ì±Œë¦°ì§€ê°€ ì•„ì§ ì‹œì‘ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.",
            "color": 16776960,
            "fields": [
              {
                "name": "ğŸ“… ì‹œì‘ ì˜ˆì •ì¼",
                "value": "2025-09-23",
                "inline": true
              },
              {
                "name": "ğŸ“… ì˜¤ëŠ˜ ë‚ ì§œ",
                "value": "${{ steps.calculate.outputs.current_date }}",
                "inline": true
              }
            ],
            "footer": {
              "text": "ì‹œì‘ì¼ê¹Œì§€ ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”! â³"
            },
            "timestamp": "$(date -u +%Y-%m-%dT%H:%M:%S.%3NZ)"
          }]
        }
        EOF
        )
        
        curl -X POST "$DISCORD_WEBHOOK_URL" \
          -H "Content-Type: application/json" \
          -d "$NOT_STARTED_MESSAGE"
          
    - name: Log success
      run: |
        if [ "${{ steps.calculate.outputs.completed }}" == "true" ]; then
          echo "ğŸ‰ 79ì¼ ì™„ë£Œ! ì™„ë£Œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í–ˆìŠµë‹ˆë‹¤."
          echo "ğŸ›‘ ì›Œí¬í”Œë¡œìš°ê°€ ìë™ìœ¼ë¡œ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤."
        elif [ "${{ steps.calculate.outputs.not_started }}" == "true" ]; then
          echo "â° ì•„ì§ ì‹œì‘ ì „ì…ë‹ˆë‹¤."
        else
          echo "âœ… ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!"
          echo "ğŸ“… ë‚ ì§œ: ${{ steps.calculate.outputs.current_date }}"
          echo "ğŸ“š ë¬¸ì œ: ${{ steps.problem.outputs.name }}"
          echo "ğŸ”¢ Day: ${{ steps.calculate.outputs.day_number }}/79"
          PROGRESS=$(( ${{ steps.calculate.outputs.day_number }} * 100 / 79 ))
          echo "ğŸ“ˆ ì§„í–‰ë¥ : ${PROGRESS}%"
        fi
